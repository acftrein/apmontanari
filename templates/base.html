<!DOCTYPE html>
<html lang="pt">

<head>
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <meta name="theme-color" content="#2185d0" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>App Montanari</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
  <style>
    body {
      margin: 2em;
    }

    .ui.container {
      max-width: 600px;
      margin: auto;
    }

    .ui.form input {
      width: 100%;
    }

    .checkbox-cell {
      text-align: center;
    }
  </style>
  <style>
    .ui.container {
      max-width: 100%;
      padding: 1em;
    }

    .ui.items .item {
      border: 1px solid #eee;
      border-radius: 4px;
      margin-bottom: 0.5em;
    }
  </style>

  <style>
    .ui.divided.items>.item:first-child {
      border-top: 1px solid #d4d4d5 !important;
    }
  </style>

</head>

<body style="margin: 0; height: 100vh; display: flex; flex-direction: column;">
  <div class="ui container" style="flex: 0 0 auto; padding: 1em;">
    <h2 class="ui center aligned header">Recebimentos</h2>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="ui info message">
      {% for msg in messages %}
      <p>{{ msg }}</p>
      {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    {% block fixed_content %}{% endblock %}
  </div>

  <!-- Área scrollável -->
  <div style="flex: 1 1 auto; overflow-y: auto; padding: 1em;">
    {% block scrollable_content %}{% endblock %}
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const cpfInput = document.getElementById("cpf");
      if (cpfInput) {
        cpfInput.addEventListener("input", function () {
          let value = cpfInput.value.replace(/\D/g, "").slice(0, 11); // Apenas números
          value = value.replace(/(\d{3})(\d)/, "$1.$2");
          value = value.replace(/(\d{3})(\d)/, "$1.$2");
          value = value.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
          cpfInput.value = value;
        });
      }
    });
  </script>

  <script>
    function excluirRegistro(id) {
      id = parseInt(id);  // converte a string recebida para número
      if (!confirm('Deseja excluir este registro?')) return;
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = `/excluir/${id}`;
      document.body.appendChild(form);
      form.submit();
    }
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const valorInput = document.getElementById("valor");

      if (valorInput) {
        valorInput.addEventListener("input", function () {
          let val = valorInput.value.replace(/\D/g, "");
          val = (parseFloat(val) / 100).toFixed(2).toString();
          val = val.replace(".", ",").replace(/\B(?=(\d{3})+(?!\d))/g, ".");
          valorInput.value = "R$ " + val;
        });
      }
    });
  </script>

</body>

</html>